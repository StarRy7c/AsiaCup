<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Video Player | @CRIxZy</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.11/controls.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Modern CSS Reset & Base */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html,
        body {
            height: 100%;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #0f0f0f 100%);
            color: #ffffff;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Video Container with Modern Styling */
        .video-container {
            width: 100%;
            height: 60vh;
            max-height: 85vh;
            background: linear-gradient(45deg, #000000, #111111);
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            margin: 20px auto;
            max-width: 95%;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.8), 
                        0 0 0 1px rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        /* Enhanced Video Element */
        #video {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 20px;
        }

        /* Modern Shaka Player Controls */
        .shaka-controls-container {
            background: linear-gradient(180deg, 
                transparent 0%, 
                rgba(0, 0, 0, 0.3) 60%, 
                rgba(0, 0, 0, 0.8) 100%) !important;
            backdrop-filter: blur(15px) !important;
            border-radius: 0 0 20px 20px !important;
        }

        /* Enhanced Seek Bar */
        .shaka-seek-bar-container {
            height: 8px !important;
            margin: 0 16px 12px 16px !important;
            position: relative !important;
            border-radius: 4px !important;
            overflow: hidden !important;
        }

        .shaka-seek-bar {
            height: 8px !important;
            border-radius: 4px !important;
            background: rgba(255, 255, 255, 0.2) !important;
            backdrop-filter: blur(10px) !important;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        }

        .shaka-seek-bar:hover {
            height: 12px !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 4px 15px rgba(0, 255, 204, 0.4) !important;
        }

        /* Seek Bar Progress Colors */
        .shaka-seek-bar-buffered {
            background: linear-gradient(90deg, 
                rgba(255, 107, 0, 0.6) 0%, 
                rgba(255, 140, 0, 0.8) 100%) !important;
            border-radius: 4px !important;
        }

        .shaka-seek-bar-played {
            background: linear-gradient(90deg, 
                #00ffcc 0%, 
                #0099ff 50%, 
                #6600ff 100%) !important;
            border-radius: 4px !important;
            box-shadow: 0 0 20px rgba(0, 255, 204, 0.5) !important;
        }

        /* Modern Control Buttons */
        .shaka-controls-button-panel button {
            background: rgba(255, 255, 255, 0.1) !important;
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
            border-radius: 12px !important;
            margin: 0 4px !important;
            padding: 12px !important;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
            backdrop-filter: blur(10px) !important;
        }

        .shaka-controls-button-panel button:hover {
            background: rgba(255, 255, 255, 0.2) !important;
            transform: translateY(-2px) scale(1.05) !important;
            box-shadow: 0 8px 25px rgba(0, 255, 204, 0.3) !important;
            border-color: rgba(0, 255, 204, 0.5) !important;
        }

        /* Quality Settings - Prominent Placement */
        .shaka-overflow-menu {
            background: linear-gradient(135deg, 
                rgba(0, 0, 0, 0.95) 0%, 
                rgba(20, 20, 20, 0.95) 100%) !important;
            backdrop-filter: blur(20px) !important;
            border-radius: 16px !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.8) !important;
        }

        .shaka-settings-menu {
            background: linear-gradient(135deg, 
                rgba(0, 0, 0, 0.95) 0%, 
                rgba(20, 20, 20, 0.95) 100%) !important;
            backdrop-filter: blur(20px) !important;
            border-radius: 16px !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
        }

        .shaka-overflow-menu button,
        .shaka-settings-menu button {
            background: transparent !important;
            color: #ffffff !important;
            font-weight: 500 !important;
            padding: 14px 20px !important;
            border-radius: 10px !important;
            margin: 4px !important;
            transition: all 0.2s ease !important;
            font-family: 'Inter', sans-serif !important;
        }

        .shaka-overflow-menu button:hover,
        .shaka-settings-menu button:hover {
            background: linear-gradient(90deg, #00ffcc, #0099ff) !important;
            color: #000000 !important;
            transform: translateX(4px) !important;
        }

        .shaka-current-selection-span {
            color: #00ffcc !important;
            font-weight: 600 !important;
        }

        /* Volume Bar Enhancement */
        .shaka-volume-bar-container {
            height: 6px !important;
        }

        .shaka-volume-bar {
            background: rgba(255, 255, 255, 0.2) !important;
            height: 6px !important;
            border-radius: 3px !important;
        }

        .shaka-volume-bar-level {
            background: linear-gradient(90deg, #00ffcc, #0099ff) !important;
            border-radius: 3px !important;
        }

        /* Telegram Integration */
        .telegram-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 30px auto 20px auto;
            max-width: 800px;
            padding: 0 20px;
        }

        .telegram-btn-main {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, #0088cc 0%, #0066aa 100%);
            color: #ffffff;
            padding: 16px 32px;
            border-radius: 16px;
            font-size: 18px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 136, 204, 0.3);
            position: relative;
            overflow: hidden;
        }

        .telegram-btn-main::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .telegram-btn-main:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0, 136, 204, 0.5);
            background: linear-gradient(135deg, #0099dd 0%, #0077bb 100%);
        }

        .telegram-btn-main:hover::before {
            left: 100%;
        }

        .telegram-icon {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        /* Quality Badge */
        .quality-badge {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin-left: 15px;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Info Box Enhancement */
        .info-box {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
            padding: 24px;
            margin: 30px auto;
            border-radius: 20px;
            max-width: 600px;
            font-size: 16px;
            line-height: 1.7;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        /* Share Container Enhancement */
        .share-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px auto;
            padding: 0 20px;
            max-width: 600px;
            flex-wrap: wrap;
        }

        .share-option {
            color: white;
            text-decoration: none;
            font-weight: 600;
            padding: 16px 24px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-size: 15px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            flex: 1;
            min-width: 180px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .share-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .share-option:hover::before {
            left: 100%;
        }

        .share-option:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
        }

        .share-option.whatsapp { 
            background: linear-gradient(135deg, #25D366 0%, #20b954 100%);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.3);
        }
        
        .share-option.whatsapp:hover { 
            box-shadow: 0 15px 35px rgba(37, 211, 102, 0.5);
        }

        .share-option.telegram { 
            background: linear-gradient(135deg, #0088cc 0%, #0066aa 100%);
            box-shadow: 0 8px 25px rgba(0, 136, 204, 0.3);
        }
        
        .share-option.telegram:hover { 
            box-shadow: 0 15px 35px rgba(0, 136, 204, 0.5);
        }

        /* Enhanced Popup */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(15px);
        }

        .popup-content {
            background: linear-gradient(135deg, 
                rgba(30, 30, 30, 0.95) 0%, 
                rgba(20, 20, 20, 0.95) 100%);
            backdrop-filter: blur(25px);
            padding: 40px;
            border-radius: 24px;
            text-align: center;
            position: relative;
            width: 90%;
            max-width: 400px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.8);
            animation: popupSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes popupSlideIn {
            from { 
                opacity: 0; 
                transform: scale(0.8) translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: scale(1) translateY(0); 
            }
        }

        .popup-content .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            color: #888;
            cursor: pointer;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
        }

        .popup-content .close-btn:hover {
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(90deg);
        }

        .popup-content svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            filter: drop-shadow(0 4px 15px rgba(55, 174, 226, 0.3));
        }

        .popup-content h3 {
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(135deg, #00ffcc, #0099ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .popup-content p {
            margin-bottom: 30px;
            color: #ccc;
            font-size: 16px;
            line-height: 1.6;
        }

        .popup-join-btn {
            display: block;
            width: 100%;
            background: linear-gradient(135deg, #0088cc 0%, #0066aa 100%);
            color: #fff;
            padding: 18px;
            border-radius: 16px;
            font-size: 18px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 25px rgba(0, 136, 204, 0.3);
        }

        .popup-join-btn:hover {
            background: linear-gradient(135deg, #0099dd 0%, #0077bb 100%);
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(0, 136, 204, 0.5);
        }

        .popup-already-joined {
            display: block;
            margin-top: 16px;
            color: #aaa;
            text-decoration: none;
            font-size: 14px;
            opacity: 0.7;
            cursor: pointer;
            transition: all 0.3s;
        }

        .popup-already-joined:hover {
            opacity: 1;
            color: #fff;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .video-container {
                height: 50vh;
                border-radius: 15px;
                margin: 15px auto;
            }
            
            .telegram-header {
                flex-direction: column;
                gap: 10px;
            }
            
            .share-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .share-option {
                min-width: auto;
            }
            
            .quality-badge {
                margin-left: 0;
                margin-top: 10px;
            }
        }

        /* Hide Shaka spinner */
        .shaka-spinner-container { 
            display: none !important; 
        }

        /* Custom loading animation */
        .custom-loader {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
        }

        .custom-loader::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border: 3px solid rgba(0, 255, 204, 0.2);
            border-top: 3px solid #00ffcc;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Telegram Header -->
    <div class="telegram-header">
        <a class="telegram-btn-main" href="https://t.me/+q1P8ArfVAlU1YzZl" target="_blank">
            <svg class="telegram-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.568 8.16l-1.85 8.725c-.139.642-.504.799-1.022.497L12 15.297l-1.743 1.677c-.194.191-.357.351-.733.351l.262-3.73 6.716-6.07c.291-.26-.064-.406-.452-.146L7.68 11.73l-2.696-.846c-.587-.182-.599-.587.123-.869L19.56 6.32c.488-.182.917.111.759.84z" fill="currentColor"/>
            </svg>
            Join Our Telegram
        </a>
        <div class="quality-badge">HD Quality</div>
    </div>

    <!-- Enhanced Video Container -->
    <div class="video-container" data-shaka-player-container shaka-controls="true">
        <video autoplay data-shaka-player id="video" muted poster="https://placehold.co/1280x720/000000/FFFFFF?text=Loading+Premium+Player..." preload="auto"></video>
        <div class="custom-loader" id="customLoader"></div>
    </div>

    <div class="info-box">
        🌟 Enjoying the premium streaming experience? Share it with your friends and help us grow our amazing community! Your support means the world to us! ❤️
    </div>
  
    <div class="share-container">
        <a id="whatsappShare" class="share-option whatsapp" href="#" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.068-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/>
            </svg>
            Share on WhatsApp
        </a>
        <a id="telegramShare" class="share-option telegram" href="#" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.287 5.906c-.778.324-2.334.994-4.666 2.01-.378.15-.577.298-.595.442-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294.26.006.549-.1.868-.32 2.179-1.471 3.304-2.214 3.374-2.23.05-.012.12-.026.166.016.047.041.042.12.037.141-.03.129-1.227 1.241-1.846 1.817-.193.18-.33.307-.358.336a8.154 8.154 0 0 1-.188.186c-.38.366-.664.64.015 1.088.327.216.589.393.85.571.284.194.568.387.936.629.093.06.183.125.27.187.331.236.63.448.997.414.214-.02.435-.22.547-.82.265-1.417.786-4.486.906-5.751a1.426 1.426 0 0 0-.013-.315.337.337 0 0 0-.114-.217.526.526 0 0 0-.31-.093c-.3.005-.763.166-2.984 1.09z"/>
            </svg>
            Share on Telegram
        </a>
    </div>

    <!-- Enhanced Popup -->
    <div id="telegramPopup" class="popup-overlay">
        <div class="popup-content">
            <span class="close-btn" onclick="closePopup()">&times;</span>
            <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="32" cy="32" r="32" fill="#37AEE2"></circle>
                <path d="M46 17L18 28.5385L28.5 33.5M46 17L35.5 48L28.5 33.5M46 17L28.5 33.5" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <h3>Join Our Premium Community</h3>
            <p>Get exclusive access to premium content, early updates, and connect with fellow streamers in our vibrant Telegram community.</p>
            <a class="popup-join-btn" href="https://t.me/+q1P8ArfVAlU1YzZl" target="_blank" onclick="closePopup()">Join Premium Channel</a>
            <a class="popup-already-joined" onclick="closePopup()">Already a member? Continue watching</a>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.11/shaka-player.ui.min.js" crossorigin="anonymous"></script>

    <script>
        // Enhanced anti-inspection with modern approach
        (function() {
            const securityFeatures = {
                disableRightClick() {
                    document.addEventListener('contextmenu', event => {
                        event.preventDefault();
                        this.showSecurityAlert('Right-click is disabled for security');
                    });
                },

                disableDevTools() {
                    document.addEventListener('keydown', event => {
                        const forbiddenKeys = [
                            event.keyCode === 123, // F12
                            event.ctrlKey && event.shiftKey && event.keyCode === 73, // Ctrl+Shift+I
                            event.ctrlKey && event.shiftKey && event.keyCode === 67, // Ctrl+Shift+C
                            event.ctrlKey && event.shiftKey && event.keyCode === 74, // Ctrl+Shift+J
                            event.ctrlKey && event.keyCode === 85 // Ctrl+U
                        ];
                        
                        if (forbiddenKeys.some(key => key)) {
                            event.preventDefault();
                            this.showSecurityAlert('Developer tools access is restricted');
                        }
                    });
                },

                detectDevTools() {
                    const check = setInterval(() => {
                        const threshold = 160;
                        const heightDiff = window.outerHeight - window.innerHeight;
                        const widthDiff = window.outerWidth - window.innerWidth;
                        
                        if (heightDiff > threshold || widthDiff > threshold) {
                            this.showSecurityBlock();
                            clearInterval(check);
                        }
                    }, 1000);
                },

                showSecurityAlert(message) {
                    // Create non-intrusive notification
                    const alert = document.createElement('div');
                    alert.style.cssText = `
                        position: fixed; top: 20px; right: 20px; z-index: 10000;
                        background: linear-gradient(135deg, #ff4757, #ff3742);
                        color: white; padding: 12px 20px; border-radius: 8px;
                        font-family: Inter, sans-serif; font-size: 14px; font-weight: 500;
                        box-shadow: 0 8px 25px rgba(255, 71, 87, 0.3);
                        animation: slideIn 0.3s ease-out;
                    `;
                    alert.textContent = message;
                    document.body.appendChild(alert);
                    setTimeout(() => alert.remove(), 3000);
                },

                showSecurityBlock() {
                    document.body.innerHTML = `
                        <div style="
                            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                            background: linear-gradient(135deg, #1a1a1a, #000);
                            color: white; display: flex; flex-direction: column;
                            justify-content: center; align-items: center;
                            font-family: Inter, sans-serif; text-align: center; z-index: 99999;
                        ">
                            <div style="font-size: 4rem; margin-bottom: 20px;">🔒</div>
                            <h1 style="font-size: 2rem; margin-bottom: 10px;">Access Restricted</h1>
                            <p style="font-size: 1.2rem; opacity: 0.8; margin-bottom: 30px;">Developer tools are not permitted on this platform</p>
                            <button onclick="window.location.reload()" style="
                                background: linear-gradient(135deg, #0088cc, #0066aa);
                                color: white; padding: 15px 30px; border: none;
                                border-radius: 8px; font-size: 1.1rem; cursor: pointer;
                                transition: all 0.3s ease;
                            ">Reload Page</button>
                        </div>
                    `;
                },

                init() {
                    this.disableRightClick();
                    this.disableDevTools();
                    this.detectDevTools();
                }
            };

            // Initialize security
            securityFeatures.init();
        })();

        // Global variables
        const popup = document.getElementById('telegramPopup');
        const customLoader = document.getElementById('customLoader');
        let player, ui;

        // --- Enhanced Popup Logic ---
        function showPopup() {
            popup.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closePopup() {
            popup.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        // Close popup when clicking outside
        popup.addEventListener('click', function(event) {
            if (event.target === popup) {
                closePopup();
            }
        });

        // Close popup with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && popup.style.display === 'flex') {
                closePopup();
            }
        });

        // --- Enhanced Share Button Logic ---
        function updateShareLinks() {
            const link = window.location.href;
            const encodedLink = encodeURIComponent(link);
            const shareText = encodeURIComponent("🎬 Check out this amazing HD stream! Premium quality content awaits:");

            const whatsappLink = `https://api.whatsapp.com/send?text=${shareText}%20${encodedLink}`;
            const telegramLink = `https://t.me/share/url?url=${encodedLink}&text=${shareText}`;

            document.getElementById('whatsappShare').href = whatsappLink;
            document.getElementById('telegramShare').href = telegramLink;
        }

        // --- Modern Loading Management ---
        function showLoader() {
            if (customLoader) customLoader.style.display = 'block';
        }

        function hideLoader() {
            if (customLoader) customLoader.style.display = 'none';
        }

        // --- Enhanced Shaka Player Initialization ---
        async function initializePlayer() {
            try {
                const video = document.getElementById("video");
                
                // Initialize UI
                ui = video.ui;
                const controls = ui.getControls();
                player = controls.getPlayer();
                window.player = player;

                // Enhanced UI Configuration
                ui.configure({
                    controlPanelElements: [
                        "play_pause", 
                        "mute", 
                        "volume", 
                        "spacer",
                        "time_and_duration", 
                        "quality", // Quality selector prominently placed
                        "picture_in_picture",
                        "fullscreen", 
                        "overflow_menu"
                    ],
                    volumeBarColors: { 
                        base: "rgba(255, 255, 255, 0.2)", 
                        level: "rgba(0, 255, 204, 0.8)" 
                    },
                    seekBarColors: { 
                        base: "rgba(255, 255, 255, 0.2)", 
                        buffered: "rgba(255, 140, 0, 0.8)", 
                        played: "rgba(0, 255, 204, 0.9)" 
                    },
                    fadeDelay: 3,
                    addSeekBar: true,
                    addBigPlayButton: true,
                    enableKeyboardPlaybackControls: true,
                    enableFullscreenOnRotation: true
                });

                // Event listeners
                player.addEventListener("error", onPlayerErrorEvent);
                controls.addEventListener("error", onUIErrorEvent);
                
                // Loading events
                player.addEventListener('loading', showLoader);
                player.addEventListener('loaded', hideLoader);
                player.addEventListener('streaming', hideLoader);

                // --- Premium Stream Configuration ---
                const streamConfig = {
                    mpdUrl: 'https://sundirectgo-live.pc.cdn.bitgravity.com/hd39/dth.mpd',
                    kid: 'e36345ee8f2c44b3bfeecd8c8444ff96',
                    key: 'da4cf1b9b4f4325477874b3f1b84d9b9'
                };
                
                // Enhanced player configuration
                player.configure({ 
                    drm: { 
                        clearKeys: { 
                            [streamConfig.kid]: streamConfig.key 
                        } 
                    },
                    streaming: {
                        bufferingGoal: 30,
                        rebufferingGoal: 10,
                        bufferBehind: 30
                    },
                    abr: {
                        enabled: true,
                        defaultBandwidthEstimate: 5000000,
                        switchInterval: 8
                    }
                });

                // Load the stream
                showLoader();
                await player.load(streamConfig.mpdUrl);
                hideLoader();
                
                console.log("✅ Premium HD stream loaded successfully!");
                
                // Show success notification
                showStreamNotification("🎬 Premium HD Stream Ready!", "success");

            } catch (error) { 
                hideLoader();
                onPlayerError(error); 
                showStreamNotification("❌ Stream loading failed. Retrying...", "error");
                
                // Auto-retry mechanism
                setTimeout(() => {
                    console.log("🔄 Attempting to reload stream...");
                    initializePlayer();
                }, 3000);
            }
        }

        // --- Enhanced Error Handling ---
        function onPlayerErrorEvent(errorEvent) { 
            onPlayerError(errorEvent.detail); 
        }
        
        function onPlayerError(error) { 
            console.error("🚫 Shaka Player Error:", error);
            hideLoader();
            
            // User-friendly error display
            showStreamNotification(`Stream Error: ${error.message || 'Connection issue'}`, "error");
        }
        
        function onUIErrorEvent(errorEvent) { 
            onPlayerError(errorEvent.detail); 
        }

        // --- Stream Notification System ---
        function showStreamNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const bgColor = type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6';
            
            notification.style.cssText = `
                position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
                z-index: 10001; background: ${bgColor}; color: white;
                padding: 12px 24px; border-radius: 8px;
                font-family: Inter, sans-serif; font-size: 14px; font-weight: 500;
                box-shadow: 0 8px 25px rgba(0,0,0,0.3);
                animation: notificationSlide 0.3s ease-out;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'notificationSlide 0.3s ease-in reverse';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }

        // --- Enhanced Initialization ---
        function initializeApp() {
            console.log("🚀 Initializing Premium Video Player...");
            
            // Initialize player
            initializePlayer();
            
            // Initialize UI features
            updateShareLinks();
            
            // Show welcome popup after delay
            setTimeout(() => {
                showPopup();
                showStreamNotification("💎 Welcome to Premium Streaming!", "success");
            }, 2000);
            
            // Add dynamic loading effects
            addDynamicEffects();
        }

        // --- Dynamic Visual Effects ---
        function addDynamicEffects() {
            // Add CSS animations
            const style = document.createElement('style');
            style.textContent = `
                @keyframes notificationSlide {
                    from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                    to { opacity: 1; transform: translateX(-50%) translateY(0); }
                }
                
                @keyframes slideIn {
                    from { opacity: 0; transform: translateX(100%); }
                    to { opacity: 1; transform: translateX(0); }
                }
                
                .video-container::before {
                    content: '';
                    position: absolute;
                    top: -2px; left: -2px; right: -2px; bottom: -2px;
                    background: linear-gradient(45deg, #00ffcc, #0099ff, #6600ff, #ff0066);
                    background-size: 400% 400%;
                    border-radius: 22px;
                    z-index: -1;
                    animation: gradientShift 8s ease infinite;
                    opacity: 0.1;
                }
                
                @keyframes gradientShift {
                    0%, 100% { background-position: 0% 50%; }
                    50% { background-position: 100% 50%; }
                }
            `;
            document.head.appendChild(style);
        }

        // --- Event Listeners ---
        document.addEventListener("shaka-ui-loaded", initializeApp);
        
        // Page visibility API for pause/resume
        document.addEventListener('visibilitychange', function() {
            if (player) {
                if (document.hidden) {
                    player.pause();
                } else {
                    player.play().catch(() => {}); // Auto-resume when tab becomes visible
                }
            }
        });

        // Network status monitoring
        window.addEventListener('online', function() {
            showStreamNotification("🌐 Connection restored", "success");
            if (player && player.getPlayheadTimeAsDate) {
                // Attempt to resume stream
                setTimeout(() => initializePlayer(), 1000);
            }
        });

        window.addEventListener('offline', function() {
            showStreamNotification("📱 Connection lost. Stream will resume when online.", "error");
        });

        console.log("🎬 Premium Video Player Script Loaded Successfully!");
    </script>
    
    <!-- Analytics Counter (Enhanced) -->
    <a href="https://www.freecounterstat.com" title="Premium Stream Analytics" style="
        position: fixed; 
        bottom: 10px; 
        right: 10px; 
        opacity: 0.3; 
        transition: opacity 0.3s ease;
        border-radius: 8px;
        overflow: hidden;
    " onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='0.3'">
        <img src="https://counter4.optistats.ovh/private/freecounterstat.php?c=h39cnaqxrdaeatb6lbmyly49lw2tf743" 
             border="0" 
             title="Premium Stream Analytics" 
             alt="Stream Analytics"
             style="border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">
    </a>

</body>
</html>
                    